{% extends '::base.html.twig' %}

{% block body %}
    <h1>Liste des utilisateurs</h1>


    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>#</th>
                <th>Nom d'utilisateur</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Email</th>
                <th>Actions</th>
                <th colspan="2">Statut</th>
                <th colspan="2">Modification</th>

            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.id|e }}</td>
                    <td>{{ user.username|e }}</td>
                    <td>{{ user.name|e }}</td>
                    <td>{{ user.surname|e }}</td>
                    <td>{{ user.email|e }}</td>
                    <td>
                        {% if "ROLE_ADMIN" in user.roles %}
                            <a href="{{ path('ip_motors_demote_admin', {username : user.username}) }}" class="btn btn-danger btn-sm">Rétrograder</a>
                        {% else %}
                            <a href="{{ path('ip_motors_promote_admin', {username : user.username}) }}" class="btn btn-success btn-sm">Promouvoir</a>   
                        {%endif %}
                    </td>

                    <td>
                        {% if user.enabled %}
                            <strong>Activé</strong>
                        {% else %}
                            <strong>Désactivé</strong> 
                        {%endif %}
                    </td>
                    <td>
                        {% if user.enabled %}
                            <a href="{{ path('ip_motors_desactivate_user', {username : user.username}) }}" class="btn btn-danger btn-sm">Désactiver</a>
                        {% else %}
                            <a href="{{ path('ip_motors_activate_user', {username : user.username}) }}" class="btn btn-success btn-sm">Activer</a>   
                        {%endif %}                       
                    </td>
                    <td>
                        <a href="{{ path('ip_motors_edit_user', {id : user.id}) }}" class="btn btn-info btn-sm">Modifier le profil</a>                  
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}